<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>C5 Cruz Roja ‚Äì Hermosillo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
body { margin:0; font-family: Arial, sans-serif; background:#0b0f14; }
#map { height:100vh; }

/* PANEL C5 */
.panel {
  position:absolute;
  top:15px;
  left:15px;
  width:260px;
  background:#111821;
  color:white;
  padding:15px;
  border-radius:12px;
  box-shadow:0 0 20px rgba(0,0,0,0.6);
  z-index:999;
}

.panel h2 {
  margin:0 0 10px 0;
  color:#ff2b2b;
}

.estado {
  padding:6px 10px;
  border-radius:6px;
  margin-top:6px;
  font-size:13px;
}

.disponible { background:#1f8b4c; }
.saturado { background:#b32020; }
.proceso { background:#b38b1f; }

</style>
</head>
<body>

<div id="map"></div>

<div class="panel">
  <h2>C5 Cruz Roja</h2>
  <div id="info">Sistema activo</div>
</div>

<script>

// ================= MAPA BASE =================
var map = L.map('map').setView([29.09, -110.96], 12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'¬© OpenStreetMap'
}).addTo(map);

// ================= ICONOS =================

// hospital semaforizado
function iconoHospital(color){
  return L.divIcon({
    html:`<div style="
      width:22px;height:22px;
      background:${color};
      border:3px solid white;
      border-radius:6px;
      box-shadow:0 0 6px rgba(0,0,0,0.6);
    "></div>`,
    className:"",
    iconSize:[22,22]
  });
}

// ambulancia
var iconoAmbulancia = L.divIcon({
  html:`<div style="
    font-size:20px;
  ">üöë</div>`,
  className:"",
  iconSize:[20,20]
});

// ================= HOSPITALES =================
var hospitales = [
["HGES","disponible",29.08149,-111.00376],
["IMSS HGZ 14","saturado",29.09878,-111.00153],
["IMSS HGZ 02","proceso",29.10370,-110.95337],
["Hospital CIMA","disponible",29.06470,-110.96136],
["Hospital Infantil","disponible",29.11639,-110.97176]
];

hospitales.forEach(h=>{
  let color =
    h[1]=="disponible" ? "#22c55e" :
    h[1]=="saturado" ? "#ef4444" :
    "#facc15";

  L.marker([h[2],h[3]],{icon:iconoHospital(color)})
    .addTo(map)
    .bindPopup(`<b>${h[0]}</b><br>Estado: ${h[1]}`);
});

// ================= AMBULANCIAS =================
var ambulancias = [
["SON-526",29.09,-110.97],
["SON-528",29.07,-110.95],
["SON-529",29.11,-110.98]
];

ambulancias.forEach(a=>{
  L.marker([a[1],a[2]],{icon:iconoAmbulancia})
    .addTo(map)
    .bindPopup(`<b>Ambulancia ${a[0]}</b>`);
});

// ================= TR√ÅFICO (visual) =================
L.tileLayer(
 "https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",
 {opacity:0.4}
).addTo(map);

// ================= CLIMA (requiere API) =================
// reemplaza TU_API_KEY
/*
L.tileLayer(
 "https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=TU_API_KEY",
 {opacity:0.5}
).addTo(map);
*/

</script>
</body>
</html>